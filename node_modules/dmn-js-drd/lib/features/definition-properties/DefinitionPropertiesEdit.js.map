{"version":3,"sources":["../../../src/features/definition-properties/DefinitionPropertiesEdit.js"],"names":["debounce","DEBOUNCE_DELAY","query","domQuery","DefinitionIdEdit","eventBus","modeling","canvas","_eventBus","_modeling","_canvas","on","event","container","html","nameElement","idElement","_setup","$inject","prototype","update","type","newValue","newProperties","updateProperties","getRootElement","node","self","setAttribute","addEventListener","evt","value","target","textContent","trim","keyCode","blur","window","getSelection","removeAllRanges"],"mappings":"AAAA,SACEA,QADF,QAEO,UAFP;;AAIA,IAAIC,iBAAiB,GAArB;;AAEA,SACEC,SAASC,QADX,QAEO,SAFP;;AAKA,eAAe,SAASC,gBAAT,CAA0BC,QAA1B,EAAoCC,QAApC,EAA8CC,MAA9C,EAAsD;AACnE,OAAKC,SAAL,GAAiBH,QAAjB;AACA,OAAKI,SAAL,GAAiBH,QAAjB;AACA,OAAKI,OAAL,GAAeH,MAAf;;AAEAF,WAASM,EAAT,CAAY,yBAAZ,EAAuC,UAASC,KAAT,EAAgB;AACrD,QAAIC,YAAYD,MAAME,IAAtB;AAAA,QACIC,cAAcZ,SAAS,uBAAT,EAAkCU,SAAlC,CADlB;AAAA,QAEIG,YAAYb,SAAS,qBAAT,EAAgCU,SAAhC,CAFhB;;AAIA,SAAKI,MAAL,CAAYF,WAAZ,EAAyB,MAAzB;AACA,SAAKE,MAAL,CAAYD,SAAZ,EAAuB,IAAvB;AACD,GAPD,EAOG,IAPH;AAQD;;AAEDZ,iBAAiBc,OAAjB,GAA2B,CACzB,UADyB,EAEzB,UAFyB,EAGzB,QAHyB,CAA3B;;AAOAd,iBAAiBe,SAAjB,CAA2BC,MAA3B,GAAoC,UAASC,IAAT,EAAeC,QAAf,EAAyB;AAC3D,MAAIC,gBAAgB,EAApB;AACAA,gBAAcF,IAAd,IAAsBC,QAAtB;;AAEA,OAAKb,SAAL,CAAee,gBAAf,CAAgC,KAAKd,OAAL,CAAae,cAAb,EAAhC,EAA+DF,aAA/D;AACD,CALD;;AAOAnB,iBAAiBe,SAAjB,CAA2BF,MAA3B,GAAoC,UAASS,IAAT,EAAeL,IAAf,EAAqB;AACvD,MAAIM,OAAO,IAAX;;AAEAD,OAAKE,YAAL,CAAkB,iBAAlB,EAAqC,IAArC;;AAEAF,OAAKG,gBAAL,CAAsB,OAAtB,EAA+B7B,SAAS,UAAS8B,GAAT,EAAc;AACpD,QAAIC,QAAQD,IAAIE,MAAJ,CAAWD,KAAX,IAAoBD,IAAIE,MAAJ,CAAWC,WAA3C;;AAEAN,SAAKP,MAAL,CAAYC,IAAZ,EAAkBU,MAAMG,IAAN,EAAlB;AACD,GAJ8B,EAI5BjC,cAJ4B,CAA/B;;AAMAyB,OAAKG,gBAAL,CAAsB,SAAtB,EAAiC,UAASC,GAAT,EAAc;AAC7C,QAAIA,IAAIK,OAAJ,KAAgB,EAApB,EAAwB;AACtBT,WAAKU,IAAL;AACAC,aAAOC,YAAP,GAAsBC,eAAtB;AACD;AACF,GALD;AAOD,CAlBD","file":"DefinitionPropertiesEdit.js","sourcesContent":["import {\n  debounce\n} from 'min-dash';\n\nvar DEBOUNCE_DELAY = 300;\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\n\nexport default function DefinitionIdEdit(eventBus, modeling, canvas) {\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._canvas = canvas;\n\n  eventBus.on('definitionIdView.create', function(event) {\n    var container = event.html,\n        nameElement = domQuery('.dmn-definitions-name', container),\n        idElement = domQuery('.dmn-definitions-id', container);\n\n    this._setup(nameElement, 'name');\n    this._setup(idElement, 'id');\n  }, this);\n}\n\nDefinitionIdEdit.$inject = [\n  'eventBus',\n  'modeling',\n  'canvas'\n];\n\n\nDefinitionIdEdit.prototype.update = function(type, newValue) {\n  var newProperties = {};\n  newProperties[type] = newValue;\n\n  this._modeling.updateProperties(this._canvas.getRootElement(), newProperties);\n};\n\nDefinitionIdEdit.prototype._setup = function(node, type) {\n  var self = this;\n\n  node.setAttribute('contenteditable', true);\n\n  node.addEventListener('input', debounce(function(evt) {\n    var value = evt.target.value || evt.target.textContent;\n\n    self.update(type, value.trim());\n  }, DEBOUNCE_DELAY));\n\n  node.addEventListener('keydown', function(evt) {\n    if (evt.keyCode === 13) {\n      node.blur();\n      window.getSelection().removeAllRanges();\n    }\n  });\n\n};\n"]}