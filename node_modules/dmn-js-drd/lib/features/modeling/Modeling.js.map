{"version":3,"sources":["../../../src/features/modeling/Modeling.js"],"names":["inherits","BaseModeling","UpdatePropertiesHandler","IdClaimHandler","Modeling","canvas","eventBus","elementFactory","commandStack","drdRules","_canvas","_drdRules","call","$inject","prototype","getHandlers","handlers","updateProperties","element","properties","_commandStack","execute","claimId","id","moddleElement","claiming","unclaimId","connect","source","target","attrs","hints","rootElement","getRootElement","canConnect","type","createConnection"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;;AAEA,OAAOC,YAAP,MAAyB,2CAAzB;;AAEA,OAAOC,uBAAP,MAAoC,kCAApC;AACA,OAAOC,cAAP,MAA2B,yBAA3B;;AAGA;;;;;;;;;AASA,eAAe,SAASC,QAAT,CACXC,MADW,EAEXC,QAFW,EAGXC,cAHW,EAIXC,YAJW,EAKXC,QALW,EAKD;;AAEZ,OAAKC,OAAL,GAAeL,MAAf;AACA,OAAKM,SAAL,GAAiBF,QAAjB;;AAEAR,eAAaW,IAAb,CAAkB,IAAlB,EAAwBN,QAAxB,EAAkCC,cAAlC,EAAkDC,YAAlD;AACD;;AAEDR,SAASI,QAAT,EAAmBH,YAAnB;;AAEAG,SAASS,OAAT,GAAmB,CACjB,QADiB,EAEjB,UAFiB,EAGjB,gBAHiB,EAIjB,cAJiB,EAKjB,UALiB,CAAnB;;AAQAT,SAASU,SAAT,CAAmBC,WAAnB,GAAiC,YAAW;AAC1C,MAAIC,WAAWf,aAAaa,SAAb,CAAuBC,WAAvB,CAAmCH,IAAnC,CAAwC,IAAxC,CAAf;;AAEAI,WAAS,0BAAT,IAAuCd,uBAAvC;AACAc,WAAS,gBAAT,IAA6Bb,cAA7B;;AAEA,SAAOa,QAAP;AACD,CAPD;;AASAZ,SAASU,SAAT,CAAmBG,gBAAnB,GAAsC,UAASC,OAAT,EAAkBC,UAAlB,EAA8B;AAClE,OAAKC,aAAL,CAAmBC,OAAnB,CAA2B,0BAA3B,EAAuD;AACrDH,aAASA,OAD4C;AAErDC,gBAAYA;AAFyC,GAAvD;AAID,CALD;;AAOAf,SAASU,SAAT,CAAmBQ,OAAnB,GAA6B,UAASC,EAAT,EAAaC,aAAb,EAA4B;AACvD,OAAKJ,aAAL,CAAmBC,OAAnB,CAA2B,gBAA3B,EAA6C;AAC3CE,QAAIA,EADuC;AAE3CL,aAASM,aAFkC;AAG3CC,cAAU;AAHiC,GAA7C;AAKD,CAND;;AASArB,SAASU,SAAT,CAAmBY,SAAnB,GAA+B,UAASH,EAAT,EAAaC,aAAb,EAA4B;AACzD,OAAKJ,aAAL,CAAmBC,OAAnB,CAA2B,gBAA3B,EAA6C;AAC3CE,QAAIA,EADuC;AAE3CL,aAASM;AAFkC,GAA7C;AAID,CALD;;AAOApB,SAASU,SAAT,CAAmBa,OAAnB,GAA6B,UAASC,MAAT,EAAiBC,MAAjB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuC;;AAElE,MAAItB,WAAW,KAAKE,SAApB;AAAA,MACIqB,cAAc,KAAKtB,OAAL,CAAauB,cAAb,EADlB;;AAGA,MAAI,CAACH,KAAL,EAAY;AACVA,YAAQrB,SAASyB,UAAT,CAAoBN,MAApB,EAA4BC,MAA5B,KAAuC,EAAEM,MAAM,iBAAR,EAA/C;AACD;;AAED,SAAO,KAAKC,gBAAL,CAAsBR,MAAtB,EAA8BC,MAA9B,EAAsCC,KAAtC,EAA6CE,WAA7C,EAA0DD,KAA1D,CAAP;AACD,CAVD","file":"Modeling.js","sourcesContent":["import inherits from 'inherits';\n\nimport BaseModeling from 'diagram-js/lib/features/modeling/Modeling';\n\nimport UpdatePropertiesHandler from './cmd/UpdatePropertiesHandler.js';\nimport IdClaimHandler from './cmd/IdClaimHandler.js';\n\n\n/**\n * DMN 1.1 modeling features activator\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {CommandStack} commandStack\n * @param {DrdRules} drdRules\n */\nexport default function Modeling(\n    canvas,\n    eventBus,\n    elementFactory,\n    commandStack,\n    drdRules) {\n\n  this._canvas = canvas;\n  this._drdRules = drdRules;\n\n  BaseModeling.call(this, eventBus, elementFactory, commandStack);\n}\n\ninherits(Modeling, BaseModeling);\n\nModeling.$inject = [\n  'canvas',\n  'eventBus',\n  'elementFactory',\n  'commandStack',\n  'drdRules'\n];\n\nModeling.prototype.getHandlers = function() {\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\n\n  handlers['element.updateProperties'] = UpdatePropertiesHandler;\n  handlers['id.updateClaim'] = IdClaimHandler;\n\n  return handlers;\n};\n\nModeling.prototype.updateProperties = function(element, properties) {\n  this._commandStack.execute('element.updateProperties', {\n    element: element,\n    properties: properties\n  });\n};\n\nModeling.prototype.claimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement,\n    claiming: true\n  });\n};\n\n\nModeling.prototype.unclaimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement\n  });\n};\n\nModeling.prototype.connect = function(source, target, attrs, hints) {\n\n  var drdRules = this._drdRules,\n      rootElement = this._canvas.getRootElement();\n\n  if (!attrs) {\n    attrs = drdRules.canConnect(source, target) || { type: 'dmn:Association' };\n  }\n\n  return this.createConnection(source, target, attrs, rootElement, hints);\n};\n"]}