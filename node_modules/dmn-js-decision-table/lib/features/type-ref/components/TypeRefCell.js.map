{"version":3,"sources":["../../../../src/features/type-ref/components/TypeRefCell.js"],"names":["Component","is","TypeRefCell","props","onClick","event","element","getTypeRefTarget","_eventBus","fire","onContextmenu","actualElement","$parent","node","id","onElementsChanged","forceUpdate","injector","context","_changeSupport","changeSupport","_sheet","get","target","offElementsChanged","inputExpression","className","actualClassName","colId","typeRef"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;;AAEA,SAASC,EAAT,QAAmB,kCAAnB;;IAGqBC,W;;;AAEnB,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA,0HACXA,KADW;;AAAA,UAInBC,OAJmB,GAIT,UAACC,KAAD,EAAW;;AAEnB,UAAMC,UAAU,MAAKC,gBAAL,EAAhB;;AAEA,YAAKC,SAAL,CAAeC,IAAf,CAAoB,cAApB,EAAoC;AAClCJ,oBADkC;AAElCC;AAFkC,OAApC;AAID,KAZkB;;AAAA,UAcnBI,aAdmB,GAcH,UAACL,KAAD,EAAW;AAAA,UAEjBC,OAFiB,GAEL,MAAKH,KAFA,CAEjBG,OAFiB;;;AAIzB,UAAIK,gBAAgBL,OAApB;;AAEA,UAAIL,GAAGK,OAAH,EAAY,uBAAZ,CAAJ,EAA0C;AACxCK,wBAAgBL,QAAQM,OAAxB;AACD;;AAED,YAAKJ,SAAL,CAAeC,IAAf,CAAoB,kBAApB,EAAwC;AACtCJ,oBADsC;AAEtCQ,cAAMR,MAAMQ,IAF0B;AAGtCC,YAAIH,cAAcG;AAHoB,OAAxC;AAKD,KA7BkB;;AAAA,UA+BnBC,iBA/BmB,GA+BC,YAAM;AACxB,YAAKC,WAAL;AACD,KAjCkB;;AAAA;AAElB;;;;yCAiCoB;AAAA,UACXC,QADW,GACE,KAAKC,OADP,CACXD,QADW;;;AAGnB,WAAKE,cAAL,GAAsB,KAAKD,OAAL,CAAaE,aAAnC;AACA,WAAKC,MAAL,GAAcJ,SAASK,GAAT,CAAa,OAAb,CAAd;AACA,WAAKd,SAAL,GAAiBS,SAASK,GAAT,CAAa,UAAb,CAAjB;;AAEA,UAAMC,SAAS,KAAKhB,gBAAL,EAAf;;AAEA,WAAKY,cAAL,CAAoBJ,iBAApB,CAAsCQ,OAAOT,EAA7C,EAAiD,KAAKC,iBAAtD;AACD;;;2CAEsB;AACrB,UAAMQ,SAAS,KAAKhB,gBAAL,EAAf;;AAEA,WAAKY,cAAL,CAAoBK,kBAApB,CAAuCD,OAAOT,EAA9C,EAAkD,KAAKC,iBAAvD;AACD;;;uCAEkB;AAAA,UAGfT,OAHe,GAIb,KAAKH,KAJQ,CAGfG,OAHe;;;AAMjB,aAAOL,GAAGK,OAAH,EAAY,iBAAZ,IAAiCA,QAAQmB,eAAzC,GAA2DnB,OAAlE;AACD;;;6BAEQ;AAAA,mBAIH,KAAKH,KAJF;AAAA,UAELG,OAFK,UAELA,OAFK;AAAA,UAGLoB,SAHK,UAGLA,SAHK;;;AAMP,UAAMC,kBAAkB,CAACD,aAAa,EAAd,IAAoB,WAA5C;;AAEA,UAAME,QAAQ3B,GAAGK,OAAH,EAAY,uBAAZ,IACVA,QAAQM,OAAR,CAAgBE,EADN,GAEVR,QAAQQ,EAFZ;;AAIA,kCAGgBa,eAHhB,EAOMrB,QAAQuB,OAPd;AAAA,iBAEU,WAFV;AAAA,uBAIkBD,KAJlB;AAAA,mBAKc,KAAKxB,OALnB;AAAA,yBAMoB,KAAKM;AANzB;AAUD;;;;EAtFsCV,S;;eAApBE,W","file":"TypeRefCell.js","sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport { is } from 'dmn-js-shared/lib/util/ModelUtil';\r\n\r\n\r\nexport default class TypeRefCell extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  onClick = (event) => {\r\n\r\n    const element = this.getTypeRefTarget();\r\n\r\n    this._eventBus.fire('typeRef.edit', {\r\n      event,\r\n      element\r\n    });\r\n  }\r\n\r\n  onContextmenu = (event) => {\r\n\r\n    const { element } = this.props;\r\n\r\n    let actualElement = element;\r\n\r\n    if (is(element, 'dmn:LiteralExpression')) {\r\n      actualElement = element.$parent;\r\n    }\r\n\r\n    this._eventBus.fire('cell.contextmenu', {\r\n      event,\r\n      node: event.node,\r\n      id: actualElement.id\r\n    });\r\n  }\r\n\r\n  onElementsChanged = () => {\r\n    this.forceUpdate();\r\n  }\r\n\r\n  componentWillMount() {\r\n    const { injector } = this.context;\r\n\r\n    this._changeSupport = this.context.changeSupport;\r\n    this._sheet = injector.get('sheet');\r\n    this._eventBus = injector.get('eventBus');\r\n\r\n    const target = this.getTypeRefTarget();\r\n\r\n    this._changeSupport.onElementsChanged(target.id, this.onElementsChanged);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const target = this.getTypeRefTarget();\r\n\r\n    this._changeSupport.offElementsChanged(target.id, this.onElementsChanged);\r\n  }\r\n\r\n  getTypeRefTarget() {\r\n\r\n    const {\r\n      element\r\n    } = this.props;\r\n\r\n    return is(element, 'dmn:InputClause') ? element.inputExpression : element;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      element,\r\n      className\r\n    } = this.props;\r\n\r\n    const actualClassName = (className || '') + ' type-ref';\r\n\r\n    const colId = is(element, 'dmn:LiteralExpression')\r\n      ? element.$parent.id\r\n      : element.id;\r\n\r\n    return (\r\n      <th\r\n        title=\"Data Type\"\r\n        className={ actualClassName }\r\n        data-col-id={ colId }\r\n        onClick={ this.onClick }\r\n        onContextmenu={ this.onContextmenu }>\r\n        { element.typeRef }\r\n      </th>\r\n    );\r\n  }\r\n\r\n}"]}