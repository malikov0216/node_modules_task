{"version":3,"sources":["../../../../src/features/simple-date-edit/components/OutputDateEdit.js"],"names":["Component","ValidatedInput","getSampleDate","validateISOString","parseString","OutputDateEdit","props","context","_modeling","injector","get","element","parsedString","businessObject","text","state","date","debounceInput","debouncedEditCell","editCell","bind","onClick","onInput","cell","setState","isValid","value"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;;AAEA,OAAOC,cAAP,MAA2B,6CAA3B;;AAEA,SACEC,aADF,EAEEC,iBAFF,EAGEC,WAHF,QAIO,UAJP;;IAOqBC,c;;;AAEnB,0BAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,gIACpBD,KADoB,EACbC,OADa;;AAG1B,UAAKC,SAAL,GAAiBD,QAAQE,QAAR,CAAiBC,GAAjB,CAAqB,UAArB,CAAjB;;AAH0B,QAKlBC,OALkB,GAKN,MAAKL,KAAL,CAAWC,OALL,CAKlBI,OALkB;;;AAO1B,QAAMC,eAAeR,YAAYO,QAAQE,cAAR,CAAuBC,IAAnC,CAArB;;AAEA,UAAKC,KAAL,GAAa;AACXC,YAAMJ,eAAeA,aAAaI,IAA5B,GAAmC;AAD9B,KAAb;;AAIA,QAAMC,gBAAgBV,QAAQE,QAAR,CAAiBC,GAAjB,CAAqB,eAArB,CAAtB;;AAEA,UAAKQ,iBAAL,GAAyBD,cAAc,MAAKE,QAAL,CAAcC,IAAd,OAAd,CAAzB;AACA,UAAKD,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,OAAhB;;AAEA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaD,IAAb,OAAf;AACA,UAAKE,OAAL,GAAe,MAAKA,OAAL,CAAaF,IAAb,OAAf;AAnB0B;AAoB3B;;;;6BAEQG,I,EAAMT,I,EAAM;AACnB,WAAKN,SAAL,CAAeW,QAAf,CAAwBI,IAAxB,EAA8BT,IAA9B;AACD;;;8BAES;AAAA,UACAH,OADA,GACY,KAAKL,KAAL,CAAWC,OADvB,CACAI,OADA;;;AAGR,UAAMK,OAAOd,eAAb;;AAEA,WAAKsB,QAAL,CAAc;AACZR;AADY,OAAd;;AAIA,WAAKG,QAAL,CAAcR,QAAQE,cAAtB,sBAAyDG,IAAzD;AACD;;;kCAE2B;AAAA,UAAlBS,OAAkB,QAAlBA,OAAkB;AAAA,UAATC,KAAS,QAATA,KAAS;;AAC1B,UAAID,OAAJ,EAAa;AAAA,YACHd,OADG,GACS,KAAKL,KAAL,CAAWC,OADpB,CACHI,OADG;;;AAGX,aAAKa,QAAL,CAAc;AACZR,gBAAMU;AADM,SAAd;;AAIA,aAAKR,iBAAL,CAAuBP,QAAQE,cAA/B,sBAAkEa,KAAlE;AAED;AACF;;;6BAEQ;AAAA,UACCV,IADD,GACU,KAAKD,KADf,CACCC,IADD;;;AAGP,mCACa,yCADb,wBAGc,aAHd,yDAKc,aALd;AAAA,mBASkB,KAAKM,OATvB;AAAA,iCAU+BpB,eAV/B;AAAA,oBAWmBC,iBAXnB;AAAA,iBAYgBa,IAZhB;AAAA,qBAakB;AAblB,8BAgBmB,UAhBnB,qDAkBoB,WAlBpB;AAAA,gBAiByB,GAjBzB;AAAA,mBAmBoB,KAAKK;AAnBzB;AAyBD;;;;EAjFyCrB,S;;eAAvBK,c","file":"OutputDateEdit.js","sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport ValidatedInput from 'dmn-js-shared/lib/components/ValidatedInput';\r\n\r\nimport {\r\n  getSampleDate,\r\n  validateISOString,\r\n  parseString\r\n} from '../Utils';\r\n\r\n\r\nexport default class OutputDateEdit extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this._modeling = context.injector.get('modeling');\r\n\r\n    const { element } = this.props.context;\r\n\r\n    const parsedString = parseString(element.businessObject.text);\r\n\r\n    this.state = {\r\n      date: parsedString ? parsedString.date : ''\r\n    };\r\n\r\n    const debounceInput = context.injector.get('debounceInput');\r\n\r\n    this.debouncedEditCell = debounceInput(this.editCell.bind(this));\r\n    this.editCell = this.editCell.bind(this);\r\n\r\n    this.onClick = this.onClick.bind(this);\r\n    this.onInput = this.onInput.bind(this);\r\n  }\r\n\r\n  editCell(cell, text) {\r\n    this._modeling.editCell(cell, text);\r\n  }\r\n\r\n  onClick() {\r\n    const { element } = this.props.context;\r\n\r\n    const date = getSampleDate();\r\n\r\n    this.setState({\r\n      date\r\n    });\r\n\r\n    this.editCell(element.businessObject, `date and time(\"${ date }\")`);\r\n  }\r\n\r\n  onInput({ isValid, value }) {\r\n    if (isValid) {\r\n      const { element } = this.props.context;\r\n\r\n      this.setState({\r\n        date: value\r\n      });\r\n\r\n      this.debouncedEditCell(element.businessObject, `date and time(\"${ value }\")`);\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { date } = this.state;\r\n\r\n    return (\r\n      <div class=\"context-menu-container simple-date-edit\">\r\n\r\n        <h3 class=\"dms-heading\">Edit Date</h3>\r\n\r\n        <h4 class=\"dms-heading\">Set Date</h4>\r\n\r\n        <div>\r\n          <ValidatedInput\r\n            onInput={ this.onInput }\r\n            placeholder={ `e.g. ${ getSampleDate() }` }\r\n            validate={ validateISOString }\r\n            value={ date }\r\n            className=\"dms-block\">\r\n          </ValidatedInput>\r\n\r\n          <p className=\"dms-hint\">\r\n            Set date <a href=\"#\"\r\n              className=\"use-today\"\r\n              onClick={ this.onClick }>to today</a>.\r\n          </p>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}"]}