{"version":3,"sources":["../../../../../src/features/decision-table-head/editor/components/OutputCell.js"],"names":["Component","mixin","ComponentWithSlots","OutputCell","props","context","onClick","event","output","_eventBus","fire","onContextmenu","id","onElementsChanged","forceUpdate","injector","_changeSupport","changeSupport","get","_elementRegistry","offElementsChanged","label","name","slotFills","type","cellType","col"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;;AAEA,SACEC,KADF,QAEO,yBAFP;;AAIA,SACEC,kBADF,QAEO,qCAFP;;IAKqBC,U;;;AAEnB,sBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,wHACpBD,KADoB,EACbC,OADa;;AAAA,UAM5BC,OAN4B,GAMlB,UAACC,KAAD,EAAW;AAAA,UACXC,MADW,GACA,MAAKJ,KADL,CACXI,MADW;;;AAGnB,YAAKC,SAAL,CAAeC,IAAf,CAAoB,aAApB,EAAmC;AACjCH,oBADiC;AAEjCC;AAFiC,OAAnC;AAID,KAb2B;;AAAA,UAe5BG,aAf4B,GAeZ,UAACJ,KAAD,EAAW;AAAA,UACjBK,EADiB,GACV,MAAKR,KAAL,CAAWI,MADD,CACjBI,EADiB;;;AAGzB,YAAKH,SAAL,CAAeC,IAAf,CAAoB,kBAApB,EAAwC;AACtCH,oBADsC;AAEtCK;AAFsC,OAAxC;AAID,KAtB2B;;AAAA,UAwB5BC,iBAxB4B,GAwBR,YAAM;AACxB,YAAKC,WAAL;AACD,KA1B2B;;AAG1Bb,iBAAYC,kBAAZ;AAH0B;AAI3B;;;;yCAwBoB;AAAA,UACXa,QADW,GACE,KAAKV,OADP,CACXU,QADW;;;AAGnB,WAAKC,cAAL,GAAsB,KAAKX,OAAL,CAAaY,aAAnC;AACA,WAAKR,SAAL,GAAiBM,SAASG,GAAT,CAAa,UAAb,CAAjB;AACA,WAAKC,gBAAL,GAAwBJ,SAASG,GAAT,CAAa,iBAAb,CAAxB;;AALmB,UAOXV,MAPW,GAOA,KAAKJ,KAPL,CAOXI,MAPW;;;AASnB,WAAKQ,cAAL,CAAoBH,iBAApB,CAAsCL,OAAOI,EAA7C,EAAiD,KAAKC,iBAAtD;AACD;;;2CAEsB;AAAA,UACbL,MADa,GACF,KAAKJ,KADH,CACbI,MADa;;;AAGrB,WAAKQ,cAAL,CAAoBI,kBAApB,CAAuCZ,OAAOI,EAA9C,EAAkD,KAAKC,iBAAvD;AACD;;;6BAEQ;AACP,UAAML,SAAS,KAAKJ,KAAL,CAAWI,MAA1B;;AAEA,UAAIa,QAAQb,OAAOU,GAAP,CAAW,OAAX,CAAZ;AACA,UAAII,OAAOd,OAAOU,GAAP,CAAW,MAAX,CAAX;;AAEA,kCAKc,2BALd,GAQM,KAAKK,SAAL,CAAe;AACbC,cAAM,YADO;AAEbnB,iBAAS;AACPoB,oBAAU,aADH;AAEPC,eAAK,KAAKP,gBAAL,CAAsBD,GAAtB,CAA0BV,OAAOI,EAAjC;AAFE,SAFI;AAMbc,aAAKlB;AANQ,OAAf,CARN,EAmBMa,+BACkB,cADlB,EAEMA,KAFN;AAAA,iBACuC;AADvC,kCAKkB,aALlB,EAMMC,QAAQ,GANd;AAAA,iBAKsC;AALtC,QAnBN;AAAA,uBAEkBd,OAAOI,EAFzB;AAAA,mBAGc,KAAKN,OAHnB;AAAA,yBAIoB,KAAKK;AAJzB;AA+BD;;;;EArFqCX,S;;eAAnBG,U","file":"OutputCell.js","sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport {\r\n  mixin\r\n} from 'table-js/lib/components';\r\n\r\nimport {\r\n  ComponentWithSlots\r\n} from 'dmn-js-shared/lib/components/mixins';\r\n\r\n\r\nexport default class OutputCell extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    mixin(this, ComponentWithSlots);\r\n  }\r\n\r\n  onClick = (event) => {\r\n    const { output } = this.props;\r\n\r\n    this._eventBus.fire('output.edit', {\r\n      event,\r\n      output\r\n    });\r\n  }\r\n\r\n  onContextmenu = (event) => {\r\n    const { id } = this.props.output;\r\n\r\n    this._eventBus.fire('cell.contextmenu', {\r\n      event,\r\n      id\r\n    });\r\n  }\r\n\r\n  onElementsChanged = () => {\r\n    this.forceUpdate();\r\n  }\r\n\r\n  componentWillMount() {\r\n    const { injector } = this.context;\r\n\r\n    this._changeSupport = this.context.changeSupport;\r\n    this._eventBus = injector.get('eventBus');\r\n    this._elementRegistry = injector.get('elementRegistry');\r\n\r\n    const { output } = this.props;\r\n\r\n    this._changeSupport.onElementsChanged(output.id, this.onElementsChanged);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { output } = this.props;\r\n\r\n    this._changeSupport.offElementsChanged(output.id, this.onElementsChanged);\r\n  }\r\n\r\n  render() {\r\n    const output = this.props.output;\r\n\r\n    var label = output.get('label');\r\n    var name = output.get('name');\r\n\r\n    return (\r\n      <th\r\n        data-col-id={ output.id }\r\n        onClick={ this.onClick }\r\n        onContextmenu={ this.onContextmenu }\r\n        className=\"output-cell output-editor\">\r\n\r\n        {\r\n          this.slotFills({\r\n            type: 'cell-inner',\r\n            context: {\r\n              cellType: 'output-cell',\r\n              col: this._elementRegistry.get(output.id)\r\n            },\r\n            col: output\r\n          })\r\n        }\r\n\r\n        {\r\n          label ? (\r\n            <span className=\"output-label\" title=\"Output Label\">\r\n              { label }\r\n            </span>\r\n          ) : (\r\n            <span className=\"output-name\" title=\"Output Expression\">\r\n              { name || '-' }\r\n            </span>\r\n          )\r\n        }\r\n      </th>\r\n    );\r\n  }\r\n\r\n}"]}