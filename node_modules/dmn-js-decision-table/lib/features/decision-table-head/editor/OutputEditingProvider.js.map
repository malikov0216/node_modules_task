{"version":3,"sources":["../../../../src/features/decision-table-head/editor/OutputEditingProvider.js"],"names":["closest","domClosest","OutputCell","OutputCellContextMenu","OutputEditingProvider","components","contextMenu","eventBus","renderer","onGetComponent","cellType","context","contextMenuType","on","event","output","target","node","getBoundingClientRect","left","top","width","height","container","getContainer","open","x","parentNode","scrollLeft","y","scrollTop","offset","$inject"],"mappings":";;AAAA,SACEA,WAAWC,UADb,QAEO,SAFP;;AAIA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,qBAAP,MAAkC,oCAAlC;;IAGqBC,qB,GAEnB,+BAAYC,UAAZ,EAAwBC,WAAxB,EAAqCC,QAArC,EAA+CC,QAA/C,EAAyD;AAAA;;AAEvDH,aAAWI,cAAX,CAA0B,MAA1B,EAAkC,gBAAkB;AAAA,QAAfC,QAAe,QAAfA,QAAe;;AAClD,QAAIA,aAAa,eAAjB,EAAkC;AAChC,aAAOR,UAAP;AACD;AACF,GAJD;;AAMAG,aAAWI,cAAX,CAA0B,cAA1B,EAA0C,YAAkB;AAAA,QAAjBE,OAAiB,uEAAP,EAAO;;AAC1D,QACEA,QAAQC,eAAR,KAA4B,aAD9B,EAEE;AACA,aAAOT,qBAAP;AACD;AACF,GAND;;AAQAI,WAASM,EAAT,CAAY,aAAZ,EAA2B,iBAAuB;AAAA,QAApBC,KAAoB,SAApBA,KAAoB;AAAA,QAAbC,MAAa,SAAbA,MAAa;AAAA,QAExCC,MAFwC,GAE7BF,KAF6B,CAExCE,MAFwC;;;AAIhD,QAAMC,OAAOhB,WAAWe,MAAX,EAAmB,IAAnB,EAAyB,IAAzB,CAAb;;AAJgD,gCAMXC,KAAKC,qBAAL,EANW;AAAA,QAMxCC,IANwC,yBAMxCA,IANwC;AAAA,QAMlCC,GANkC,yBAMlCA,GANkC;AAAA,QAM7BC,KAN6B,yBAM7BA,KAN6B;AAAA,QAMtBC,MANsB,yBAMtBA,MANsB;;AAQhD,QAAMC,YAAYf,SAASgB,YAAT,EAAlB;;AAEAlB,gBAAYmB,IAAZ,CAAiB;AACfC,SAAGP,OAAOI,UAAUI,UAAV,CAAqBC,UADhB;AAEfC,SAAGT,MAAMG,UAAUI,UAAV,CAAqBG,SAFf;AAGfT,kBAHe;AAIfC;AAJe,KAAjB,EAKG;AACDV,uBAAiB,aADhB;AAEDG,oBAFC;AAGDgB,cAAQ;AACNL,WAAG,CADG;AAENG,WAAG;AAFG;AAHP,KALH;AAaD,GAvBD;AAwBD,C;;eA1CkBzB,qB;;;AA8CrBA,sBAAsB4B,OAAtB,GAAgC,CAC9B,YAD8B,EAE9B,aAF8B,EAG9B,UAH8B,EAI9B,UAJ8B,CAAhC","file":"OutputEditingProvider.js","sourcesContent":["import {\n  closest as domClosest\n} from 'min-dom';\n\nimport OutputCell from './components/OutputCell';\nimport OutputCellContextMenu from './components/OutputCellContextMenu';\n\n\nexport default class OutputEditingProvider {\n\n  constructor(components, contextMenu, eventBus, renderer) {\n\n    components.onGetComponent('cell', ({ cellType }) => {\n      if (cellType === 'output-header') {\n        return OutputCell;\n      }\n    });\n\n    components.onGetComponent('context-menu', (context = {}) => {\n      if (\n        context.contextMenuType === 'output-edit'\n      ) {\n        return OutputCellContextMenu;\n      }\n    });\n\n    eventBus.on('output.edit', ({ event, output }) => {\n\n      const { target } = event;\n\n      const node = domClosest(target, 'th', true);\n\n      const { left, top, width, height } = node.getBoundingClientRect();\n\n      const container = renderer.getContainer();\n\n      contextMenu.open({\n        x: left + container.parentNode.scrollLeft,\n        y: top + container.parentNode.scrollTop,\n        width,\n        height\n      }, {\n        contextMenuType: 'output-edit',\n        output,\n        offset: {\n          x: 4,\n          y: 4\n        }\n      });\n    });\n  }\n\n}\n\nOutputEditingProvider.$inject = [\n  'components',\n  'contextMenu',\n  'eventBus',\n  'renderer'\n];"]}