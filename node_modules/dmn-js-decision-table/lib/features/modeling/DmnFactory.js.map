{"version":3,"sources":["../../../src/features/modeling/DmnFactory.js"],"names":["is","DmnFactory","moddle","_model","type","attrs","element","create","inputExpression","typeRef","$parent","text","_ensureId","prefix","$type","replace","id","_needsId","ids","nextPrefixed","$inject"],"mappings":";;;;AAAA,SAASA,EAAT,QAAmB,kCAAnB;;IAGqBC,U;AAEnB,sBAAYC,MAAZ,EAAoB;AAAA;;AAClB,SAAKC,MAAL,GAAcD,MAAd;AACD;;;;2BAEME,I,EAAkB;AAAA,UAAZC,KAAY,uEAAJ,EAAI;;;AAEvB,UAAIC,UAAU,KAAKH,MAAL,CAAYI,MAAZ,CAAmBH,IAAnB,EAAyBC,SAAS,EAAlC,CAAd;;AAEA,UAAIL,GAAGM,OAAH,EAAY,iBAAZ,CAAJ,EAAoC;;AAElC,YAAID,MAAMG,eAAV,EAA2B;AACzBF,kBAAQE,eAAR,GAA0BH,MAAMG,eAAhC;AACD,SAFD,MAEO;AACLF,kBAAQE,eAAR,GAA0B,KAAKD,MAAL,CAAY,uBAAZ,EAAqC;AAC7DE,qBAAS;AADoD,WAArC,CAA1B;;AAIAH,kBAAQE,eAAR,CAAwBE,OAAxB,GAAkCJ,OAAlC;AACD;AAEF;;AAED,UAAIN,GAAGM,OAAH,EAAY,kBAAZ,CAAJ,EAAqC;AACnCA,gBAAQG,OAAR,GAAkBJ,MAAMI,OAAN,IAAiB,QAAnC;AACD;;AAED,UAAIT,GAAGM,OAAH,EAAY,gBAAZ,KACAN,GAAGM,OAAH,EAAY,uBAAZ,CADJ,EAC0C;;AAExCA,gBAAQK,IAAR,GAAeN,MAAMM,IAAN,IAAc,EAA7B;AACD;;AAED,WAAKC,SAAL,CAAeN,OAAf;;AAEA,aAAOA,OAAP;AACD;;;6BAEQA,O,EAAS;AAChB,aAAON,GAAGM,OAAH,EAAY,gBAAZ,CAAP;AACD;;;8BAESA,O,EAAS;;AAEjB;AACA;AACA,UAAIO,SAAS,CAACP,QAAQQ,KAAR,IAAiB,EAAlB,EAAsBC,OAAtB,CAA8B,UAA9B,EAA0C,EAA1C,IAAgD,GAA7D;;AAEA,UAAI,CAACT,QAAQU,EAAT,IAAe,KAAKC,QAAL,CAAcX,OAAd,CAAnB,EAA2C;AACzCA,gBAAQU,EAAR,GAAa,KAAKb,MAAL,CAAYe,GAAZ,CAAgBC,YAAhB,CAA6BN,MAA7B,EAAqCP,OAArC,CAAb;AACD;AACF;;;;;;eApDkBL,U;;;AAwDrBA,WAAWmB,OAAX,GAAqB,CAAE,QAAF,CAArB","file":"DmnFactory.js","sourcesContent":["import { is } from 'dmn-js-shared/lib/util/ModelUtil';\n\n\nexport default class DmnFactory {\n\n  constructor(moddle) {\n    this._model = moddle;\n  }\n\n  create(type, attrs = {}) {\n\n    var element = this._model.create(type, attrs || {});\n\n    if (is(element, 'dmn:InputClause')) {\n\n      if (attrs.inputExpression) {\n        element.inputExpression = attrs.inputExpression;\n      } else {\n        element.inputExpression = this.create('dmn:LiteralExpression', {\n          typeRef: 'string'\n        });\n\n        element.inputExpression.$parent = element;\n      }\n\n    }\n\n    if (is(element, 'dmn:OutputClause')) {\n      element.typeRef = attrs.typeRef || 'string';\n    }\n\n    if (is(element, 'dmn:UnaryTests') ||\n        is(element, 'dmn:LiteralExpression')) {\n\n      element.text = attrs.text || '';\n    }\n\n    this._ensureId(element);\n\n    return element;\n  }\n\n  _needsId(element) {\n    return is(element, 'dmn:DMNElement');\n  }\n\n  _ensureId(element) {\n\n    // generate semantic ids for elements\n    // dmn:UnaryTests -> UnaryTests_ID\n    var prefix = (element.$type || '').replace(/^[^:]*:/g, '') + '_';\n\n    if (!element.id && this._needsId(element)) {\n      element.id = this._model.ids.nextPrefixed(prefix, element);\n    }\n  }\n\n}\n\nDmnFactory.$inject = [ 'moddle' ];"]}