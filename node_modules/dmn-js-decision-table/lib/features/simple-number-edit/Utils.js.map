{"version":3,"sources":["../../../src/features/simple-number-edit/Utils.js"],"names":["keys","COMPARISON_REGULAR_EXPRESSION","RANGE_REGULAR_EXPRESSION","operators","equals","less","lessEquals","greater","greaterEquals","getOperatorName","string","filter","key","parseString","isEmptyString","trim","type","comparisonMatches","match","rangeMatches","isNumber","value","parseFloat","operator","isComparison","values","map","start","end","matches","getComparisonString","comparisonOperator","comparisonValue","getRangeString","rangeStartValue","rangeEndValue","rangeStartType","rangeEndType","rangeStartChar","rangeEndChar"],"mappings":"AAAA,SAASA,IAAT,QAAqB,UAArB;;AAEA;AACA,IAAMC,gCAAgC,sEAAtC;;AAEA;AACA,IAAMC,2BAA2B,gFAAjC;;AAEA,OAAO,IAAMC,YAAY;AACvBC,UAAQ,GADe;AAEvBC,QAAM,GAFiB;AAGvBC,cAAY,IAHW;AAIvBC,WAAS,GAJc;AAKvBC,iBAAe;AALQ,CAAlB;;AAQP,SAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC/B,SAAOV,KAAKG,SAAL,EAAgBQ,MAAhB,CAAuB,eAAO;AACnC,WAAOD,WAAWP,UAAWS,GAAX,CAAlB;AACD,GAFM,EAEJ,CAFI,CAAP;AAGD;;AAED,OAAO,SAASC,WAAT,CAAqBH,MAArB,EAA6B;AAClC,MAAI,CAACA,MAAD,IAAWI,cAAcJ,OAAOK,IAAP,EAAd,CAAf,EAA6C;AAC3C,WAAO;AACLC,YAAM;AADD,KAAP;AAGD;;AAED,MAAMC,oBAAoBP,OAAOQ,KAAP,CAAajB,6BAAb,CAA1B;AAAA,MACMkB,eAAeT,OAAOQ,KAAP,CAAahB,wBAAb,CADrB;;AAGA,MAAIe,iBAAJ,EAAuB;AACrB,QAAIG,SAASH,iBAAT,CAAJ,EAAiC;AAC/B,aAAO;AACLD,cAAM,YADD;AAELK,eAAOC,WAAWL,kBAAkB,CAAlB,CAAX,CAFF;AAGLM,kBAAU;AAHL,OAAP;AAKD,KAND,MAMO,IAAIC,aAAaP,iBAAb,CAAJ,EAAqC;AAC1C,aAAO;AACLD,cAAM,YADD;AAELK,eAAOC,WAAWL,kBAAkB,CAAlB,CAAX,CAFF;AAGLM,kBAAUd,gBAAgBQ,kBAAkB,CAAlB,CAAhB;AAHL,OAAP;AAKD;AAEF,GAfD,MAeO,IAAIE,YAAJ,EAAkB;AACvB,WAAO;AACLH,YAAM,OADD;AAELS,cAAQ,CAAEN,aAAa,CAAb,CAAF,EAAmBA,aAAa,CAAb,CAAnB,EAAqCO,GAArC,CAAyC;AAAA,eAASJ,WAAWD,KAAX,CAAT;AAAA,OAAzC,CAFH;AAGLM,aAAOR,aAAa,CAAb,MAAoB,GAApB,GAA0B,SAA1B,GAAsC,SAHxC;AAILS,WAAKT,aAAa,CAAb,MAAoB,GAApB,GAA0B,SAA1B,GAAsC;AAJtC,KAAP;AAMD;AAEF;;AAED,OAAO,SAASL,aAAT,CAAuBJ,MAAvB,EAA+B;AACpC,SAAOA,WAAW,EAAlB;AACD;;AAED,SAASU,QAAT,CAAkBS,OAAlB,EAA2B;AACzB,SAAOA,QAAQ,CAAR,KAAcA,QAAQ,CAAR,CAAd,IAA4B,CAACA,QAAQ,CAAR,CAA7B,IAA2C,CAACA,QAAQ,CAAR,CAAnD;AACD;;AAED,SAASL,YAAT,CAAsBK,OAAtB,EAA+B;AAC7B,SAAOA,QAAQ,CAAR,KAAc,CAACA,QAAQ,CAAR,CAAf,IAA6BA,QAAQ,CAAR,CAA7B,IAA2CA,QAAQ,CAAR,CAAlD;AACD;;AAED,OAAO,SAASC,mBAAT,CAA6BC,kBAA7B,EAAiDC,eAAjD,EAAkE;AACvE,MAAID,uBAAuB,QAA3B,EAAqC;AACnC,gBAAWC,eAAX;AACD,GAFD,MAEO;AACL,WAAW7B,UAAU4B,kBAAV,CAAX,SAA8CC,eAA9C;AACD;AACF;;AAED,OAAO,SAASC,cAAT,CACHC,eADG,EAEHC,aAFG,EAGHC,cAHG,EAIHC,YAJG,EAIW;AAChB,MAAMC,iBAAiBF,mBAAmB,SAAnB,GAA+B,GAA/B,GAAqC,GAA5D;AAAA,MACMG,eAAeF,iBAAiB,SAAjB,GAA6B,GAA7B,GAAmC,GADxD;;AAGA,cAAWC,cAAX,GAA8BJ,eAA9B,UAAoDC,aAApD,GAAsEI,YAAtE;AACD","file":"Utils.js","sourcesContent":["import { keys } from 'min-dash';\r\n\r\n// eslint-disable-next-line\r\nconst COMPARISON_REGULAR_EXPRESSION = /^(-?(?:[0-9]|\\.[0-9])+)$|^((?:<|>|=){0,2})\\s*(-?(?:[0-9]|\\.[0-9])+)$/;\r\n\r\n// eslint-disable-next-line\r\nconst RANGE_REGULAR_EXPRESSION = /^(\\[|\\]){1}(-?(?:[0-9]|\\.[0-9])+){1,}\\.\\.(-?(?:[0-9]|\\.[0-9])+){1,}(\\[|\\]){1}$/;\r\n\r\nexport const operators = {\r\n  equals: '=',\r\n  less: '<',\r\n  lessEquals: '<=',\r\n  greater: '>',\r\n  greaterEquals: '>='\r\n};\r\n\r\nfunction getOperatorName(string) {\r\n  return keys(operators).filter(key => {\r\n    return string === operators[ key ];\r\n  })[0];\r\n}\r\n\r\nexport function parseString(string) {\r\n  if (!string || isEmptyString(string.trim())) {\r\n    return {\r\n      type: 'comparison'\r\n    };\r\n  }\r\n\r\n  const comparisonMatches = string.match(COMPARISON_REGULAR_EXPRESSION),\r\n        rangeMatches = string.match(RANGE_REGULAR_EXPRESSION);\r\n\r\n  if (comparisonMatches) {\r\n    if (isNumber(comparisonMatches)) {\r\n      return {\r\n        type: 'comparison',\r\n        value: parseFloat(comparisonMatches[1]),\r\n        operator: 'equals'\r\n      };\r\n    } else if (isComparison(comparisonMatches)) {\r\n      return {\r\n        type: 'comparison',\r\n        value: parseFloat(comparisonMatches[3]),\r\n        operator: getOperatorName(comparisonMatches[2])\r\n      };\r\n    }\r\n\r\n  } else if (rangeMatches) {\r\n    return {\r\n      type: 'range',\r\n      values: [ rangeMatches[2], rangeMatches[3] ].map(value => parseFloat(value)),\r\n      start: rangeMatches[1] === ']' ? 'exclude' : 'include',\r\n      end: rangeMatches[4] === '[' ? 'exclude' : 'include'\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport function isEmptyString(string) {\r\n  return string === '';\r\n}\r\n\r\nfunction isNumber(matches) {\r\n  return matches[0] && matches[1] && !matches[2] && !matches[3];\r\n}\r\n\r\nfunction isComparison(matches) {\r\n  return matches[0] && !matches[1] && matches[2] && matches[3];\r\n}\r\n\r\nexport function getComparisonString(comparisonOperator, comparisonValue) {\r\n  if (comparisonOperator === 'equals') {\r\n    return `${ comparisonValue }`;\r\n  } else {\r\n    return `${ operators[comparisonOperator] } ${ comparisonValue }`;\r\n  }\r\n}\r\n\r\nexport function getRangeString(\r\n    rangeStartValue,\r\n    rangeEndValue,\r\n    rangeStartType,\r\n    rangeEndType) {\r\n  const rangeStartChar = rangeStartType === 'exclude' ? ']' : '[',\r\n        rangeEndChar = rangeEndType === 'exclude' ? '[' : ']';\r\n\r\n  return `${ rangeStartChar }${ rangeStartValue }..${ rangeEndValue }${ rangeEndChar }`;\r\n}"]}