{"version":3,"sources":["../../../../src/features/modeling/cmd/AddColHandler.js"],"names":["AddColHandler","sheet","elementFactory","_sheet","_elementFactory","context","root","getRoot","col","index","cols","length","newRoot","cells","rows","forEach","row","idx","cell","create","addCol","removeCol","$inject"],"mappings":";;;;AACA;;;IAGqBA,a;AAEnB,yBAAYC,KAAZ,EAAmBC,cAAnB,EAAmC;AAAA;;AACjC,SAAKC,MAAL,GAAcF,KAAd;AACA,SAAKG,eAAL,GAAuBF,cAAvB;AACD;;AAGD;;;;;;;4BAGQG,O,EAAS;;AAEf,UAAMJ,QAAQ,KAAKE,MAAnB;AAAA,UACMD,iBAAiB,KAAKE,eAD5B;AAAA,UAEME,OAAOL,MAAMM,OAAN,EAFb;;AAFe,UAObC,GAPa,GASXH,OATW,CAObG,GAPa;AAAA,UAQbC,KARa,GASXJ,OATW,CAQbI,KARa;;;AAWf,UAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;AAChCA,gBAAQJ,QAAQI,KAAR,GAAgBH,KAAKI,IAAL,CAAUC,MAAlC;AACD;;AAEDN,cAAQO,OAAR,GAAkBN,IAAlB;;AAEA,UAAI,CAACE,IAAIK,KAAJ,CAAUF,MAAf,EAAuB;AACrBL,aAAKQ,IAAL,CAAUC,OAAV,CAAkB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC9B,cAAMC,OAAOhB,eAAeiB,MAAf,CAAsB,MAAtB,EAA8B,EAAEH,QAAF,EAAOR,QAAP,EAA9B,CAAb;;AAEAA,cAAIK,KAAJ,CAAUI,GAAV,IAAiBC,IAAjB;AACD,SAJD;AAKD;;AAEDjB,YAAMmB,MAAN,CAAaZ,GAAb,EAAkBC,KAAlB;;AAEA,aAAOR,MAAMM,OAAN,EAAP;AACD;;AAGD;;;;;;2BAGOF,O,EAAS;AAAA,UAGZG,GAHY,GAIVH,OAJU,CAGZG,GAHY;;;AAMd,UAAMP,QAAQ,KAAKE,MAAnB;;AAEAF,YAAMoB,SAAN,CAAgBb,GAAhB;;AAEA,aAAOP,MAAMM,OAAN,EAAP;AACD;;;;;;eAxDkBP,a;;;AA4DrBA,cAAcsB,OAAd,GAAwB,CACtB,OADsB,EAEtB,gBAFsB,CAAxB","file":"AddColHandler.js","sourcesContent":["\n/**\n * A handler that implements column addition.\n */\nexport default class AddColHandler {\n\n  constructor(sheet, elementFactory) {\n    this._sheet = sheet;\n    this._elementFactory = elementFactory;\n  }\n\n\n  /**\n   * <do>\n   */\n  execute(context) {\n\n    const sheet = this._sheet,\n          elementFactory = this._elementFactory,\n          root = sheet.getRoot();\n\n    let {\n      col,\n      index\n    } = context;\n\n    if (typeof index === 'undefined') {\n      index = context.index = root.cols.length;\n    }\n\n    context.newRoot = root;\n\n    if (!col.cells.length) {\n      root.rows.forEach((row, idx) => {\n        const cell = elementFactory.create('cell', { row, col });\n\n        col.cells[idx] = cell;\n      });\n    }\n\n    sheet.addCol(col, index);\n\n    return sheet.getRoot();\n  }\n\n\n  /**\n   * <undo>\n   */\n  revert(context) {\n\n    const {\n      col\n    } = context;\n\n    const sheet = this._sheet;\n\n    sheet.removeCol(col);\n\n    return sheet.getRoot();\n  }\n\n}\n\nAddColHandler.$inject = [\n  'sheet',\n  'elementFactory'\n];"]}