{"version":3,"sources":["../../../../src/features/modeling/cmd/RemoveColHandler.js"],"names":["RemoveColHandler","sheet","elementFactory","_sheet","_elementFactory","context","col","root","oldRoot","oldIndex","cols","indexOf","Error","id","removeCol","getRoot","addCol","$inject"],"mappings":";;;;AACA;;;IAGqBA,gB;AAEnB,4BAAYC,KAAZ,EAAmBC,cAAnB,EAAmC;AAAA;;AACjC,SAAKC,MAAL,GAAcF,KAAd;AACA,SAAKG,eAAL,GAAuBF,cAAvB;AACD;;AAED;;;;;;;4BAGQG,O,EAAS;;AAEf,UAAMJ,QAAQ,KAAKE,MAAnB;;AAFe,UAKbG,GALa,GAMXD,OANW,CAKbC,GALa;;;AAQf,UAAMC,OAAOF,QAAQG,OAAR,GAAkBF,IAAIC,IAAnC;;AAEA;AACA,UAAME,WAAWJ,QAAQI,QAAR,GAAmBF,KAAKG,IAAL,CAAUC,OAAV,CAAkBL,GAAlB,CAApC;;AAEA,UAAIG,aAAa,CAAC,CAAlB,EAAqB;AACnB,cAAM,IAAIG,KAAJ,UAAiBN,IAAIO,EAArB,mBAAN;AACD;;AAEDZ,YAAMa,SAAN,CAAgBR,GAAhB;;AAEA,aAAOL,MAAMc,OAAN,EAAP;AACD;;AAGD;;;;;;2BAGOV,O,EAAS;AAAA,UAGZC,GAHY,GAKVD,OALU,CAGZC,GAHY;AAAA,UAIZG,QAJY,GAKVJ,OALU,CAIZI,QAJY;;;AAOd,UAAMR,QAAQ,KAAKE,MAAnB;;AAEAF,YAAMe,MAAN,CAAaV,GAAb,EAAkBG,QAAlB;;AAEA,aAAOR,MAAMc,OAAN,EAAP;AACD;;;;;;eAhDkBf,gB;;;AAqDrBA,iBAAiBiB,OAAjB,GAA2B,CACzB,OADyB,EAEzB,gBAFyB,CAA3B","file":"RemoveColHandler.js","sourcesContent":["\n/**\n * A handler that implements column deletion.\n */\nexport default class RemoveColHandler {\n\n  constructor(sheet, elementFactory) {\n    this._sheet = sheet;\n    this._elementFactory = elementFactory;\n  }\n\n  /**\n   * <do>\n   */\n  execute(context) {\n\n    const sheet = this._sheet;\n\n    let {\n      col\n    } = context;\n\n    const root = context.oldRoot = col.root;\n\n    // retrieve and remember previous col position\n    const oldIndex = context.oldIndex = root.cols.indexOf(col);\n\n    if (oldIndex === -1) {\n      throw new Error(`col#${col.id} not in sheet`);\n    }\n\n    sheet.removeCol(col);\n\n    return sheet.getRoot();\n  }\n\n\n  /**\n   * <undo>\n   */\n  revert(context) {\n\n    const {\n      col,\n      oldIndex\n    } = context;\n\n    const sheet = this._sheet;\n\n    sheet.addCol(col, oldIndex);\n\n    return sheet.getRoot();\n  }\n\n}\n\n\nRemoveColHandler.$inject = [\n  'sheet',\n  'elementFactory'\n];"]}