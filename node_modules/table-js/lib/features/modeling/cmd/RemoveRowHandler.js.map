{"version":3,"sources":["../../../../src/features/modeling/cmd/RemoveRowHandler.js"],"names":["RemoveRowHandler","sheet","_sheet","context","root","getRoot","row","oldIndex","rows","indexOf","oldRoot","Error","id","removeRow","addRow","$inject"],"mappings":";;;;AACA;;;IAGqBA,gB;AAEnB,4BAAYC,KAAZ,EAAmB;AAAA;;AACjB,SAAKC,MAAL,GAAcD,KAAd;AACD;;AAGD;;;;;;;4BAGQE,O,EAAS;;AAEf,UAAMF,QAAQ,KAAKC,MAAnB;AAAA,UACME,OAAOH,MAAMI,OAAN,EADb;;AAFe,UAMbC,GANa,GAOXH,OAPW,CAMbG,GANa;;AASf;;AACA,UAAMC,WAAWJ,QAAQI,QAAR,GAAmBH,KAAKI,IAAL,CAAUC,OAAV,CAAkBH,GAAlB,CAApC;;AAEAH,cAAQO,OAAR,GAAkBJ,IAAIF,IAAtB;;AAEA,UAAIG,aAAa,CAAC,CAAlB,EAAqB;AACnB,cAAM,IAAII,KAAJ,UAAiBL,IAAIM,EAArB,mBAAN;AACD;;AAEDX,YAAMY,SAAN,CAAgBP,GAAhB;;AAEA,aAAOL,MAAMI,OAAN,EAAP;AACD;;AAGD;;;;;;2BAGOF,O,EAAS;AAAA,UAGZG,GAHY,GAKVH,OALU,CAGZG,GAHY;AAAA,UAIZC,QAJY,GAKVJ,OALU,CAIZI,QAJY;;;AAOd,UAAMN,QAAQ,KAAKC,MAAnB;;AAEAD,YAAMa,MAAN,CAAaR,GAAb,EAAkBC,QAAlB;;AAEA,aAAON,MAAMI,OAAN,EAAP;AACD;;;;;;eAjDkBL,gB;;;AAqDrBA,iBAAiBe,OAAjB,GAA2B,CACzB,OADyB,CAA3B","file":"RemoveRowHandler.js","sourcesContent":["\n/**\n * A handler that implements row deletion.\n */\nexport default class RemoveRowHandler {\n\n  constructor(sheet) {\n    this._sheet = sheet;\n  }\n\n\n  /**\n   * <do>\n   */\n  execute(context) {\n\n    const sheet = this._sheet,\n          root = sheet.getRoot();\n\n    let {\n      row\n    } = context;\n\n    // retrieve and remember previous row position\n    const oldIndex = context.oldIndex = root.rows.indexOf(row);\n\n    context.oldRoot = row.root;\n\n    if (oldIndex === -1) {\n      throw new Error(`row#${row.id} not in sheet`);\n    }\n\n    sheet.removeRow(row);\n\n    return sheet.getRoot();\n  }\n\n\n  /**\n   * <undo>\n   */\n  revert(context) {\n\n    const {\n      row,\n      oldIndex\n    } = context;\n\n    const sheet = this._sheet;\n\n    sheet.addRow(row, oldIndex);\n\n    return sheet.getRoot();\n  }\n\n}\n\nRemoveRowHandler.$inject = [\n  'sheet'\n];"]}