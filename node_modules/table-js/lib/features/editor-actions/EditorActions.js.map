{"version":3,"sources":["../../../src/features/editor-actions/EditorActions.js"],"names":["forEach","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","commandStack","eventBus","modeling","selection","_actions","undo","redo","select","cell","deselect","addRow","attrs","index","removeRow","row","moveRow","addCol","removeCol","col","moveCol","action","opts","error","actions","listener","_registerAction","isRegistered","undefined","$inject","message","Error"],"mappings":"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","file":"EditorActions.js","sourcesContent":["import { forEach } from 'min-dash';\n\nconst NOT_REGISTERED_ERROR = 'is not a registered action',\n      IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with ´registerAction´ and likewise\n * unregister existing ones with ´unregisterAction´.\n *\n */\nexport default class EditorActions {\n  constructor(commandStack, eventBus, modeling, selection) {\n\n    this._actions = {\n      undo() {\n        commandStack.undo();\n      },\n      redo() {\n        commandStack.redo();\n      },\n      select({ cell }) {\n        selection.select(cell);\n      },\n      deselect() {\n        selection.deselect();\n      },\n      addRow({ attrs, index }) {\n        modeling.addRow(attrs, index);\n      },\n      removeRow({ row }) {\n        modeling.removeRow(row);\n      },\n      moveRow({ row, index }) {\n        modeling.moveRow(row, index);\n      },\n      addCol({ attrs, index }) {\n        modeling.addCol(attrs, index);\n      },\n      removeCol({ col }) {\n        modeling.removeCol(col);\n      },\n      moveCol({ col, index }) {\n        modeling.moveCol(col, index);\n      }\n    };\n  }\n\n  /**\n   * Triggers a registered action\n   *\n   * @param  {String} action\n   * @param  {Object} opts\n   *\n   * @return {Unknown} Returns what the registered listener returns\n   */\n  trigger(action, opts) {\n    if (!this._actions[action]) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    return this._actions[action](opts);\n  }\n\n  /**\n   * Registers a collections of actions.\n   * The key of the object will be the name of the action.\n   *\n   * @param  {Object} actions\n   */\n  register(actions, listener) {\n    if (typeof actions === 'string') {\n      return this._registerAction(actions, listener);\n    }\n\n    forEach(actions, (listener, action) => {\n      this._registerAction(action, listener);\n    }, this);\n  }\n\n  /**\n   * Registers a listener to an action key\n   *\n   * @param  {String} action\n   * @param  {Function} listener\n   */\n  _registerAction(action, listener) {\n    if (this.isRegistered(action)) {\n      throw error(action, IS_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = listener;\n  }\n\n  /**\n   * Unregister an existing action\n   *\n   * @param {String} action\n   */\n  unregister(action) {\n    if (!this.isRegistered(action)) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = undefined;\n  }\n\n\n  /**\n   * Checks wether the given action is registered\n   *\n   * @param {String} action\n   *\n   * @return {Boolean}\n   */\n  isRegistered(action) {\n    return !!this._actions[action];\n  }\n}\n\nEditorActions.$inject = [\n  'commandStack',\n  'eventBus',\n  'modeling',\n  'selection'\n];\n\n// helpers /////////////\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}"]}