{"version":3,"sources":["../../../../src/features/decision-properties/components/DecisionPropertiesEditorComponent.js"],"names":["Component","validateId","EditableComponent","DecisionPropertiesEditorComponent","props","context","onElementsChanged","forceUpdate","setDecisionName","name","_modeling","editDecisionName","setDecisionId","id","oldId","getDecision","editDecisionId","_viewer","injector","get","setupChangeListeners","bind","unbind","changeSupport","offElementsChanged","DecisionName","getClassName","getEditor","DecisionId"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;;AAEA,SAASC,UAAT,QAA2B,gCAA3B;;AAEA,OAAOC,iBAAP,MAA8B,gDAA9B;;IAGqBC,iC;;;AAEnB,6CAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,sKACpBD,KADoB,EACbC,OADa;;AAAA,UAqB5BC,iBArB4B,GAqBR,YAAM;AACxB,YAAKC,WAAL;AACD,KAvB2B;;AAAA,UAwC5BC,eAxC4B,GAwCV,UAACC,IAAD,EAAU;AAC1B,YAAKC,SAAL,CAAeC,gBAAf,CAAgCF,IAAhC;AACD,KA1C2B;;AAAA,UA4C5BG,aA5C4B,GA4CZ,UAACC,EAAD,EAAQ;AACtB,UAAMC,QAAQ,MAAKC,WAAL,GAAmBF,EAAjC;;AAEA,UAAIC,UAAUD,EAAd,EAAkB;AAChB;AACD;;AAED,YAAKH,SAAL,CAAeM,cAAf,CAA8BH,EAA9B;AACD,KApD2B;;AAAA,UAsD5BZ,UAtD4B,GAsDf,UAACY,EAAD,EAAQ;AACnB,aAAOZ,WAAW,MAAKc,WAAL,EAAX,EAA+BF,EAA/B,CAAP;AACD,KAxD2B;;AAG1B,UAAKI,OAAL,GAAeZ,QAAQa,QAAR,CAAiBC,GAAjB,CAAqB,QAArB,CAAf;AACA,UAAKT,SAAL,GAAiBL,QAAQa,QAAR,CAAiBC,GAAjB,CAAqB,UAArB,CAAjB;;AAEA,UAAKC,oBAAL,CAA0B;AACxBC,YAAM,MAAKN,WAAL,GAAmBF;AADD,KAA1B;AAN0B;AAS3B;;;;2CAEsB;AACrB,WAAKO,oBAAL,CAA0B;AACxBE,gBAAQ,KAAKP,WAAL,GAAmBF;AADH,OAA1B;AAGD;;;kCAEa;AACZ,aAAO,KAAKI,OAAL,CAAaF,WAAb,EAAP;AACD;;;+CAMsC;AAAA,UAAhBM,IAAgB,QAAhBA,IAAgB;AAAA,UAAVC,MAAU,QAAVA,MAAU;AAAA,UAGnCC,aAHmC,GAIjC,KAAKlB,OAJ4B,CAGnCkB,aAHmC;;;AAMrC,UAAI,OAAOD,MAAP,KAAkB,QAAtB,EAAgC;AAC9BC,sBAAcC,kBAAd,CAAiCF,MAAjC,EAAyC,KAAKhB,iBAA9C;AACD;;AAED,UAAI,OAAOe,IAAP,KAAgB,QAApB,EAA8B;AAC5BE,sBAAcjB,iBAAd,CAAgCe,IAAhC,EAAsC,KAAKf,iBAA3C;AACD;AACF;;;6BAoBQ;AAAA,yBACc,KAAKS,WAAL,EADd;AAAA,UACCN,IADD,gBACCA,IADD;AAAA,UACOI,EADP,gBACOA,EADP;;AAGP,sCACoB,qBADpB;AAAA,qBAGgB,sBAHhB;AAAA,iBAIcJ,IAJd;AAAA,oBAKiB,KAAKD;AALtB;AAAA,qBAOgB,oBAPhB;AAAA,iBAQcK,EARd;AAAA,oBASiB,KAAKZ,UATtB;AAAA,oBAUiB,KAAKW;AAVtB;AAaD;;;;EA5E4DZ,S;;eAA1CG,iC;;IA+EfsB,Y;;;;;;;;;;;6BAEK;;AAEP,kCACkB,KAAKC,YAAL,EADlB,EAEM,KAAKC,SAAL,EAFN;AAKD;;;;EATwBzB,iB;;IAarB0B,U;;;;;;;;;;;6BAEK;;AAEP,kCACkB,KAAKF,YAAL,EADlB,EAEM,KAAKC,SAAL,EAFN;AAKD;;;;EATsBzB,iB","file":"DecisionPropertiesEditorComponent.js","sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport { validateId } from 'dmn-js-shared/lib/util/IdsUtil';\r\n\r\nimport EditableComponent from 'dmn-js-shared/lib/components/EditableComponent';\r\n\r\n\r\nexport default class DecisionPropertiesEditorComponent extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this._viewer = context.injector.get('viewer');\r\n    this._modeling = context.injector.get('modeling');\r\n\r\n    this.setupChangeListeners({\r\n      bind: this.getDecision().id\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setupChangeListeners({\r\n      unbind: this.getDecision().id\r\n    });\r\n  }\r\n\r\n  getDecision() {\r\n    return this._viewer.getDecision();\r\n  }\r\n\r\n  onElementsChanged = () => {\r\n    this.forceUpdate();\r\n  }\r\n\r\n  setupChangeListeners({ bind, unbind }) {\r\n\r\n    const {\r\n      changeSupport\r\n    } = this.context;\r\n\r\n    if (typeof unbind === 'string') {\r\n      changeSupport.offElementsChanged(unbind, this.onElementsChanged);\r\n    }\r\n\r\n    if (typeof bind === 'string') {\r\n      changeSupport.onElementsChanged(bind, this.onElementsChanged);\r\n    }\r\n  }\r\n\r\n  setDecisionName = (name) => {\r\n    this._modeling.editDecisionName(name);\r\n  }\r\n\r\n  setDecisionId = (id) => {\r\n    const oldId = this.getDecision().id;\r\n\r\n    if (oldId === id) {\r\n      return;\r\n    }\r\n\r\n    this._modeling.editDecisionId(id);\r\n  }\r\n\r\n  validateId = (id) => {\r\n    return validateId(this.getDecision(), id);\r\n  }\r\n\r\n  render() {\r\n    const { name, id } = this.getDecision();\r\n\r\n    return (\r\n      <header className=\"decision-properties\">\r\n        <DecisionName\r\n          className=\"decision-name editor\"\r\n          value={ name }\r\n          onChange={ this.setDecisionName } />\r\n        <DecisionId\r\n          className=\"decision-id editor\"\r\n          value={ id }\r\n          validate={ this.validateId }\r\n          onChange={ this.setDecisionId } />\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nclass DecisionName extends EditableComponent {\r\n\r\n  render() {\r\n\r\n    return (\r\n      <h3 className={ this.getClassName() }>\r\n        { this.getEditor() }\r\n      </h3>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass DecisionId extends EditableComponent {\r\n\r\n  render() {\r\n\r\n    return (\r\n      <h5 className={ this.getClassName() }>\r\n        { this.getEditor() }\r\n      </h5>\r\n    );\r\n  }\r\n\r\n}"]}